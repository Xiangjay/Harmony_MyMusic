# 我的音乐APP项目（持续更新中。。。）

### 项目说明
- 本项目只为做学习展示，不用做任何商业用途
- 本项目需要配合后端使用，接口用的是别人之前写好的，我这里克隆了一份（https://github.com/Xiangjay/MusicAppBackEnd）
- 先在本地安装并运行后端，然后再运行本项目
- 很多功能在预览器里看不到效果，比如视频播放，播控中心播放音乐等等，建议使用模拟器或真机运行
- 默认后端是运行在本地3000端口，如果不是则需要把本项目common/BasicConstants里的BASE_URL修改成后端地址
- 模拟器或真机运行时需要把后端地址BASE_URL改成本地IP+3000端口，也可用线上后端地址，需要的请私信（vx:15241138801）
- 由于没有登录功能并且后期也不打算做真正的登录，所以依赖登录的功能都没做，比如很多歌曲都是试听版，并且只能查看评论不能写评论
- 后端拿到的评论数并不是真正的评论数量，commentsCount ≠ comments.length，这个是后端代码的原因，这里忽略不计
- 若从首页点击音乐进入音乐页面，会弹出本地歌单播放列表，点击任意歌单后会显示该歌单详情，若点击歌单或专辑进入，会直接显示该歌单/专辑详情
- 首次进入我的页面会弹出地理位置用户授权，没有实际功能，只为展示用
- 我的页面里我的歌单默认展示3个本地歌单，点击查看全部会弹窗显示所有本地歌单
- 新建歌单必须有歌单名称和封面，保存按钮的可用与否取决于页面数据是否被更改，并做了返回时路由拦截
- 由于官方推荐的Navigation不能在预览器中运行，为了开发和调试方便这里路由跳转还是用之前的Router
- 经测试，后台返回歌曲播放地址是动态的(猜测是版权原因)，为以防万一，每次播放歌曲的时候都重新取一下播放地址
- 我的页面会弹起地理位置用户授权，没有实际功能，只为展示用
- 肯定有很多不完善的地方及bug，也有很多待优化的地方，欢迎大家踊跃提意见及建议(vx:15241138801)

### 项目特色及功能
- 模仿QQ音乐、网易云音乐、抖音做的一个音乐APP，可播放音乐和视频
- 通过用户首选项实现了主题的切换（只能在模拟器或者真机上展示），在首次打开APP时会弹窗，之后在左边的侧边栏里也可以设置，目前只有深色和浅色两种主题
- 封装了媒体查询，HTTP，AVPlayer，AVSession，用户首选项，关系型数据库，用户权限弹窗等工具库
- 音乐页面集成了歌单详情、专辑详情、本地歌单详情、歌手详情以及节目详情
- 点击歌曲进行播放，可自由暂停、切换当前播放的歌曲，可自由选择播放模式，也可对当前播放列表里的歌曲进行删除等操作
- 实现了播控中心播放音乐功能，也可自由暂停、切换和选择播放模式
- 评论列表实现了懒加载，默认显示20条评论，列表下滑可继续加载20条评论
- 可像抖音一样播放视频，上下滑动切换视频，以及评论展示
- 使用关系型数据库实现了数据的本地持久化

### 待做功能
- ~~播控中心播放音乐~~ (已完成)
- 服务卡片
- ~~播放小窗口~~ (已完成)
- ~~本地播放列表的增删改查~~ (已完成)
- ~~MV视频的播放~~ (已完成)
- ~~最近播放/观看~~ (已完成)
- ~~仿QQ和网页音乐里的播放控制条效果~~(已完成)
- 所有设备的适配
- 。。。

### 更新日志
1. 2025-06-10: 初始化仓库并上传代码，实现了播放功能
2. 2025-06-10: 实现了播控中心功能
3. 2025-06-11: 重写音乐页面，兼容歌单列表和专辑
4. 2025-06-12: 重写数据结构
5. 2025-06-13: 适配歌单详情和专辑详情在同一页面中显示
6. 2025-06-13: 用LazyForEach做评论页面
7. 2025-06-13: 新增MV页面，用于按播放量降序展示所有地区MV
8. 2025-06-14: 用setWindowLayoutFullScreen替代expandSafeArea实现全屏效果，并调整所有页面样式布局
9. 2025-06-15: 用swiper + video制作mv播放页面，可像抖音一样自由上下切换视频
10. 2025-06-16: 改造评论列表，变成每次只请求20条数据，滑到底部后下滑继续请求
11. 2025-06-16: 增加视频点赞及显示评论功能
12. 2025-06-18: 新增我的页面，我的页面里我的歌单默认最多展示3个歌单，超过部分可按右上角查看全部
13. 2025-06-18: 封装关系型数据库，并在音乐页面新增歌单或专辑加入本地歌单功能
14. 2025-06-18: 实现了本地歌单的增删改查
15. 2025-06-19: 新增添加歌曲到本地歌单
16. 2025-06-20: 在我的页面新增地理位置用户授权，没有实际功能，只为展示用
17. 2025-06-20: 新增新建和编辑本地歌单功能，新建歌单必须有歌单名称和封面，保存按钮的可用与否取决于页面数据是否被更改，并做了返回时路由拦截
18. 2025-06-20: 完善了音乐页面，实现了歌单、专辑以及本地歌单详情都在同一页面展示，在首页点击音乐，会优先弹窗本地歌单选择列表
19. 2025-06-20: 抽离音乐页面和播放页面的播放列表到一个组件，之前的代码注释掉不删，以防万一
20. 2025-06-21: 新增最近播放歌曲，默认只显示最近7天的数据
21. 2025-06-21: 新增最近观看MV，默认只显示最近7天的数据
22. 2025-06-22: 排行榜页面新增官方榜单
23. 2025-06-22: 给网络图片加loading效果，并完成了歌手排行榜里的查看全部
24. 2025-06-22: 最新页面新增新歌速递
25. 2025-06-23: 新增歌手歌曲列表，音乐页面集成歌手详情，在歌手排行榜点击歌手，会跳转到音乐页面，展示歌手详情和50首热门歌曲
26. 2025-06-23: 添加麦克风授权
27. 2025-06-23: 添加节目tab内容，并在音乐页面集成节目详情
28. 2025-06-24: 实现播放控制条效果